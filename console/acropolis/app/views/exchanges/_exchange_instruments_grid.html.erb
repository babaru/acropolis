<%= grid(@instruments_grid, :show_filters => :when_filtered) do |g|

  g.column name: '#' do |instrument|
    instrument.id
  end

  g.column name: t('activerecord.attributes.instrument.security_code') do |instrument|
    instrument.security_code
  end

  g.column name: t('activerecord.attributes.instrument.symbol_id') do |instrument|
    instrument.trading_symbol.name if instrument.trading_symbol
  end

  g.column name: t('activerecord.attributes.instrument.currency') do |instrument|
    instrument.currency.name if instrument.currency
  end

  g.column name: t('activerecord.attributes.instrument.type') do |instrument|
    t("activerecord.models.#{instrument.type.underscore.downcase}")
  end

  g.column name: t('activerecord.attributes.instrument.expiration_date'), class: 'futures-instrument' do |instrument|
    instrument.expiration_date.strftime("%Y-%m-%d") if instrument.expiration_date
  end

  g.column name: t('activerecord.attributes.instrument.strike_price'), class: 'options-instrument' do |instrument|
    render_currency(instrument.strike_price)
  end

  g.column name: t('activerecord.attributes.instrument.multiplier'), class: 'futures-instrument' do |instrument|
    instrument.multiplier
  end

  g.column name: t('activerecord.attributes.instrument.trading_fee'), class: 'project-title' do |instrument|
    instrument.trading_fee.factor unless instrument.trading_fee.nil?
  end

  g.column name: t('activerecord.attributes.instrument.margin'), class: 'project-title' do |instrument|
    [
      number_to_percentage(instrument.margin_percentage, precision: 0)
    ].join('<br/>').html_safe if instrument.margin && instrument.margin.type
  end

  g.column html: {class: 'project-actions'} do |instrument|
    [
      link_to(fa_icon("pencil"), edit_instrument_path(instrument), class: 'btn btn-white btn-sm', remote: true, data: {toggle: 'tooltip'}, title: t('buttons.edit')),
      link_to(fa_icon("trash"), instrument_delete_path(instrument), class: 'btn btn-white btn-sm', remote: true, data: {toggle: 'tooltip'}, title: t('buttons.delete'))
    ].join(' ').html_safe
  end
end -%>